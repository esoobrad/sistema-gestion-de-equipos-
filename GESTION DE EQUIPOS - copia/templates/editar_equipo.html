<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Editar equipo</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='estilo.css') }}">
</head>
<body class="dark-bg text-light">
<div class="container col-md-8 my-4">
  <div class="text-center mb-3">
    <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" height="70">
  </div>
  <h2 class="text-center mb-4">‚úèÔ∏è Editar equipo</h2>

  <!-- IMPORTANTE: enctype para subir archivo -->
  <form method="post" enctype="multipart/form-data" class="p-4 rounded shadow dark-card">
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Nombre</label>
        <input type="text" name="nombre" class="form-control dark-input" value="{{ equipo[1] or '' }}" required>
      </div>
      <div class="col-md-6">
        <label class="form-label">No. Factura</label>
        <input type="text" name="num_factura" class="form-control dark-input" value="{{ equipo[2] or '' }}">
      </div>

      <div class="col-md-6"><label class="form-label">MAC</label><input type="text" name="mac" class="form-control dark-input" value="{{ equipo[3] or '' }}"></div>
      <div class="col-md-6"><label class="form-label">IP</label><input type="text" name="ip" class="form-control dark-input" value="{{ equipo[4] or '' }}"></div>

      <div class="col-md-6"><label class="form-label">Marca</label><input type="text" name="marca" class="form-control dark-input" value="{{ equipo[5] or '' }}"></div>
      <div class="col-md-6"><label class="form-label">Modelo</label><input type="text" name="modelo" class="form-control dark-input" value="{{ equipo[6] or '' }}"></div>

      <div class="col-md-6"><label class="form-label">Serie</label><input type="text" name="serie" class="form-control dark-input" value="{{ equipo[7] or '' }}"></div>
      <div class="col-md-6"><label class="form-label">Fecha de compra</label><input type="date" name="fecha_compra" class="form-control dark-input" value="{{ equipo[8] or '' }}"></div>

      <div class="col-md-6"><label class="form-label">Usuario asignado</label><input type="text" name="usuario_asignado" class="form-control dark-input" value="{{ equipo[9] or '' }}"></div>
      <div class="col-md-6"><label class="form-label">Usuario dominio</label><input type="text" name="usuario_dominio" class="form-control dark-input" value="{{ equipo[10] or '' }}"></div>

      <div class="col-md-6">
        <label class="form-label">En dominio</label>
        <select name="en_dominio" class="form-select dark-input">
          <option value="S√≠"  {{ 'selected' if equipo[11]=='S√≠' else '' }}>S√≠</option>
          <option value="No"  {{ 'selected' if equipo[11]=='No' else '' }}>No</option>
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label">Symantec</label>
        <select name="tiene_symantec" class="form-select dark-input">
          <option value="S√≠"  {{ 'selected' if equipo[12]=='S√≠' else '' }}>S√≠</option>
          <option value="No"  {{ 'selected' if equipo[12]=='No' else '' }}>No</option>
        </select>
      </div>

      <div class="col-md-6">
        <label class="form-label">BitLocker</label>
        <select name="bitlocker" class="form-select dark-input">
          <option value="S√≠"  {{ 'selected' if equipo[13]=='S√≠' else '' }}>S√≠</option>
          <option value="No"  {{ 'selected' if equipo[13]=='No' else '' }}>No</option>
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label">Conectada a internet</label>
        <select name="conectada_internet" class="form-select dark-input">
          <option value="S√≠"  {{ 'selected' if equipo[14]=='S√≠' else '' }}>S√≠</option>
          <option value="No"  {{ 'selected' if equipo[14]=='No' else '' }}>No</option>
        </select>
      </div>

      <div class="col-md-6">
        <label class="form-label">Empresa</label>
        <select name="empresa" class="form-select dark-input">
          <option value="Silicatos" {{ 'selected' if equipo[17]=='Silicatos' else '' }}>Silicatos</option>
          <option value="Silcomer"  {{ 'selected' if equipo[17]=='Silcomer'  else '' }}>Silcomer</option>
        </select>
      </div>
    </div>

    <!-- Archivo actual + subir nuevo -->
    <div class="mt-4">
      <label class="form-label">üìÑ Archivo actual</label><br>
      {% if equipo|length > 15 and equipo[15] %}
        {% set fname = (equipo[15] or '')|replace('\\','/') %}
        {% if 'static/uploads/' in fname %}
          {% set fname = fname|replace('static/uploads/','') %}
        {% endif %}
        <a href="{{ url_for('descargar_upload', filename=fname) }}" target="_blank" class="btn btn-outline-info btn-sm">Ver archivo</a>
      {% else %}
        <span class="text-muted">‚Äî Sin archivo ‚Äî</span>
      {% endif %}
    </div>

    <div class="mt-3">
      <label class="form-label">‚¨ÜÔ∏è Subir nuevo archivo (opcional)</label>
      <input type="file" name="archivo" class="form-control dark-input">
      <div class="form-text text-muted">Si subes uno nuevo, reemplaza al actual.</div>
    </div>

    <div class="mt-4 d-flex gap-2">
      <button type="submit" class="btn btn-success">üíæ Guardar cambios</button>
      <a href="/equipos" class="btn btn-secondary">‚¨Ö Volver</a>
    </div>
  </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
